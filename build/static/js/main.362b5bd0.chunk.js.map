{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/FilterForm.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Persons","personsToShow","deletePerson","map","person","key","findIndex","p","name","number","onClick","PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","FilterForm","filter","handleFilterChange","baseUrl","axios","get","newObject","post","id","delete","put","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","errorMessage","setErrorMessage","useEffect","personService","then","response","data","toLowerCase","includes","event","target","personObject","find","window","confirm","personId","catch","error","setTimeout","preventDefault","concat","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.362b5bd0.chunk.js","sourcesContent":["import React from 'react'\n\nconst Persons = ({personsToShow, deletePerson}) =>\n<div>\n  {personsToShow.map((person) =>       \n    <p key={personsToShow.findIndex((p) => p.name === person.name)}>\n      {person.name} {person.number}\n      <button onClick={()=> deletePerson(person)}>delete</button>\n    </p>\n    \n  )}\n</div>\n\nexport default Persons","import React from 'react'\n\nconst PersonForm = (props) =>\n  <form onSubmit={props.addPerson}>\n    <div>\n      name: \n      <input \n        value={props.newName}\n        onChange={props.handleNameChange}\n      />\n    </div>\n    <div>number: \n      <input \n        value={props.newNumber}\n        onChange={props.handleNumberChange}\n      />\n      </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n\nexport default PersonForm","import React from 'react'\n\nconst FilterForm = (props) =>\n<p>\n  filter shown with \n  <input\n    value={props.filter}\n    onChange={props.handleFilterChange}\n  />\n</p>\n\nexport default FilterForm","import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst del = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject) \n}\n\nexport default { getAll, create, del , update}","import React from 'react'\n\nconst Notification = ({ message, className }) =>{\n  if (message === null){\n    return null\n  }\n\n  return(\n    <div className={className}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport FilterForm from './components/FilterForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  \n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) =>{\n    setFilter(event.target.value)\n  }\n\n  const personsToShow = \n    persons.filter((person)=>\n      person.name.toLowerCase().includes(filter)\n    ) \n\n  const addPerson = (event) =>{\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if(persons.find((person)=> person.name === newName)){\n      if(window.confirm(`${personObject.name} is already added to phonebook, replace the old number with a new one?`)){\n        const personId = persons\n          .filter((person)=> person.name === newName)\n          .map((person) => person.id)\n      \n        personService\n          .update(personId, personObject)\n          .catch(error => {\n            setErrorMessage(\n              `Information of ${personObject.name} has already been removed from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } else {\n      event.preventDefault()\n      personService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response.data))\n          setNewName('')\n          setNewNumber('')\n          setMessage(\n            `Added ${newName}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          console.log(error.response.data.error)\n          setErrorMessage(error.response.data.error)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })   \n    }  \n  }\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService\n      .del(person.id)\n\n      setPersons(persons.filter(p => p.name !== person.name))\n      \n      setMessage(\n        `Deleted ${person.name}`\n      )\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    }     \n  }\n\n  return (\n    <div> \n      <h2>Phonebook</h2>\n      <Notification message={message} className={'ok'} />\n      <Notification message={errorMessage} className={'error'} />\n      <FilterForm \n        filter={filter}\n        handleFilterChange={handleFilterChange}\n      />\n      <h2>add a new</h2>\n      <PersonForm \n        addPerson={addPerson} \n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} deletePerson={deletePerson}/>   \n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}